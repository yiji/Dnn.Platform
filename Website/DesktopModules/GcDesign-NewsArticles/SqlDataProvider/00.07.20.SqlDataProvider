CREATE TABLE {databaseOwner}{objectQualifier}GcDesign_Searches_Handout(
	[HandoutID] [int] IDENTITY(1,1) NOT NULL,
	[ModuleID] [int] NOT NULL,
	[UserID] [int] NULL,
	[Name] [nvarchar](255) NOT NULL,
	[Description] [ntext] NULL
) ON [PRIMARY]
GO

CREATE TABLE {databaseOwner}{objectQualifier}GcDesign_Searches_HandoutArticle(
	[HandoutID] [int] NOT NULL,
	[ArticleID] [int] NOT NULL,
	[SortOrder] [int] NOT NULL
) ON [PRIMARY]
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_AddHandout
	@ModuleID int,
	@UserID int,
	@Name nvarchar(255),
	@Description ntext
AS

INSERT INTO {databaseOwner}{objectQualifier}GcDesign_Searches_Handout (
	[ModuleID],
	[UserID],
	[Name],
	[Description]
) VALUES (
	@ModuleID,
	@UserID,
	@Name,
	@Description
)

select SCOPE_IDENTITY()
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_AddHandoutArticle
	@HandoutID int,
	@ArticleID int,
	@SortOrder int
AS

INSERT INTO
	{databaseOwner}{objectQualifier}GcDesign_Searches_HandoutArticle(HandoutID, ArticleID, SortOrder)
VALUES
	(@HandoutID, @ArticleID, @SortOrder)
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_DeleteHandout
	@HandoutID int
AS

DELETE FROM         
	{databaseOwner}{objectQualifier}GcDesign_Searches_Handout
WHERE
	HandoutID = @HandoutID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_DeleteHandoutArticleList
	@HandoutID int
AS

DELETE FROM         
	{databaseOwner}{objectQualifier}GcDesign_Searches_HandoutArticle
WHERE
	HandoutID = @HandoutID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_GetHandout
	@HandoutID int
AS

SELECT     
	[HandoutID], 
	[ModuleID], 
	[UserID], 
	[Name], 
	[Description]
FROM         
	{databaseOwner}{objectQualifier}GcDesign_Searches_Handout
WHERE
	HandoutID = @HandoutID
Go

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_GetHandoutArticleList
	@HandoutID int
AS

SELECT     
	[HandoutID], 
	[ArticleID],
	[SortOrder]
FROM         
	{databaseOwner}{objectQualifier}GcDesign_Searches_HandoutArticle
WHERE
	HandoutID = @HandoutID
ORDER BY 
	[SortOrder] ASC
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_GetHandoutList
	@UserID int
AS

SELECT     
	[HandoutID], 
	[ModuleID], 
	[UserID], 
	[Name], 
	[Description]
FROM         
	{databaseOwner}{objectQualifier}GcDesign_Searches_Handout
WHERE
	[UserID] = @UserID
ORDER BY
	[Name] 
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_UpdateHandout
	@HandoutID int,
	@ModuleID int,
	@UserID int,
	@Name nvarchar(255),
	@Description ntext
AS

UPDATE
	{databaseOwner}{objectQualifier}GcDesign_Searches_Handout
SET
	[ModuleID] = @ModuleID,
	[UserID] = @UserID,
	[Name] = @Name,
	[Description] = @Description
WHERE
	HandoutID = @HandoutID
GO
