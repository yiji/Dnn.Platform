CREATE TABLE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate (
	[TemplateID] [int] IDENTITY (1, 1) NOT NULL ,
	[ModuleID] [int] NOT NULL ,
	[Name] [nvarchar] (50) NOT NULL ,
	[Subject] [nvarchar] (255) NOT NULL ,
	[Template] [ntext] NOT NULL 
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO

ALTER TABLE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate ADD 
	CONSTRAINT [PK_{objectQualifier}GcDesign_Searches_EmailTemplate] PRIMARY KEY  CLUSTERED 
	(
		[TemplateID]
	)  ON [PRIMARY] 
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateGet
	@TemplateID int
AS

SELECT
	[TemplateID],
	[ModuleID],
	[Name],
	[Subject],
	[Template]
FROM {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate
WHERE
	[TemplateID] = @TemplateID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateList
	@ModuleID int
AS

SELECT
	[TemplateID],
	[ModuleID],
	[Name],
	[Subject],
	[Template]
FROM {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate
WHERE
	[ModuleID] = @ModuleID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateAdd
	@ModuleID int,
	@Name nvarchar(50),
	@Subject nvarchar(255),
	@Template ntext
AS

INSERT INTO {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate (
	[ModuleID],
	[Name],
	[Subject],
	[Template]
) VALUES (
	@ModuleID,
	@Name,
	@Subject,
	@Template
)

select SCOPE_IDENTITY()
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateUpdate
	@TemplateID int, 
	@ModuleID int, 
	@Name nvarchar(50), 
	@Subject nvarchar(255), 
	@Template ntext 
AS

UPDATE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate SET
	[ModuleID] = @ModuleID,
	[Name] = @Name,
	[Subject] = @Subject,
	[Template] = @Template
WHERE
	[TemplateID] = @TemplateID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateDelete
	@TemplateID int
AS

DELETE FROM {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate
WHERE
	[TemplateID] = @TemplateID
GO

CREATE PROCEDURE {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplateGetByName
	@ModuleID int, 
	@Name nvarchar(50)
AS

SELECT
	[TemplateID],
	[ModuleID],
	[Name],
	[Subject],
	[Template]
FROM {databaseOwner}{objectQualifier}GcDesign_Searches_EmailTemplate
WHERE
	[ModuleID] = @ModuleID
	and
	[Name] = @Name
GO
