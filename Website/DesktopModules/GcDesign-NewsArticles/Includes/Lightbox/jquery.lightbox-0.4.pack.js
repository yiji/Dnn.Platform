(function($){$.fn.lightBox=function(_2){_2=jQuery.extend({overlayBgColor:"#000",overlayOpacity:0.8,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0,previous:"&#171; [P]revious",next:"[N]ext &#187;",close:"[C]lose X"},_2);var _3=this;function _initialize(){_start(this,_3);return false;}function _start(_4,_5){$("embed, object, select").css({"visibility":"hidden"});_set_interface();_2.imageArray.length=0;_2.activeImage=0;if(_5.length==1){_2.imageArray.push(new Array(_4.getAttribute("href"),_4.getAttribute("title")));}else{for(var i=0;i<_5.length;i++){_2.imageArray.push(new Array(_5[i].getAttribute("href"),_5[i].getAttribute("title"),_5[i].getAttribute("tags")));}}while(_2.imageArray[_2.activeImage][0]!=_4.getAttribute("href")){_2.activeImage++;}_set_image_to_view();}function _set_interface(){$("body").append("<div id=\"jquery-overlay\"></div><div id=\"jquery-lightbox\"><div id=\"lightbox-container-image-box\"><div id=\"lightbox-container-image\"><img id=\"lightbox-image\"><div id=\"lightbox-loading\"><a href=\"#\" id=\"lightbox-loading-link\"><img src=\""+_2.imageLoading+"\"></a></div></div></div><div id=\"lightbox-container-image-data-box\"><div id=\"lightbox-container-image-data\"><div id=\"lightbox-container-image-details\"><span id=\"lightbox-container-image-details-caption\"></span><span id=\"lightbox-container-image-details-currentNumber\"></span><span id=\"lightbox-container-image-details-nav\"><a href=\"#\" id=\"lightbox-container-image-details-nav-btnPrev\">"+_2.previous+"</a><a href=\"#\" id=\"lightbox-container-image-details-nav-btnNext\">"+_2.next+"</a></span></div><div id=\"lightbox-image-details-close\"><a href=\"#\" id=\"lightbox-image-details-close-btnClose\">"+_2.close+"</a></div></div></div></div>");var _7=___getPageSize();$("#jquery-overlay").css({backgroundColor:_2.overlayBgColor,opacity:_2.overlayOpacity,width:_7[0],height:_7[1]}).fadeIn();var _8=___getPageScroll();$("#jquery-lightbox").css({top:_8[1]+(_7[3]/10),left:_8[0]}).show();$("#jquery-overlay,#jquery-lightbox").click(function(){_finish();});$("#lightbox-loading-link,#lightbox-image-details-close-btnClose").click(function(){_finish();return false;});$(window).resize(function(){var _9=___getPageSize();$("#jquery-overlay").css({width:_9[0],height:_9[1]});var _a=___getPageScroll();$("#jquery-lightbox").css({top:_a[1]+(_9[3]/10),left:_a[0]});});}function _set_image_to_view(){$("#lightbox-loading").show();$("#lightbox-image,#lightbox-nav,#lightbox-container-image-details-nav-btnPrev,#lightbox-container-image-details-nav-btnNext,#lightbox-container-image-data-box,#lightbox-container-image-details-currentNumber").hide();var _b=new Image();_b.onload=function(){$("#lightbox-image").attr("src",_2.imageArray[_2.activeImage][0]);_resize_container_image_box(_b.width,_b.height);_b.onload=function(){};};_b.src=_2.imageArray[_2.activeImage][0];}function _resize_container_image_box(_c,_d){var _e=$("#lightbox-container-image-box").width();var _f=$("#lightbox-container-image-box").height();var _10=(_c+(_2.containerBorderSize*2));var _11=(_d+(_2.containerBorderSize*2));var _12=_e-_10;var _13=_f-_11;$("#lightbox-container-image-box").animate({width:_10,height:_11},_2.containerResizeSpeed,function(){_show_image();});if((_12==0)&&(_13==0)){if($.browser.msie){___pause(250);}else{___pause(100);}}$("#lightbox-container-image-data-box").css({width:_10});}function _show_image(){$("#lightbox-loading").hide();$("#lightbox-image").fadeIn(function(){_show_image_data();_set_navigation();});_preload_neighbor_images();}function _show_image_data(){$("#lightbox-container-image-data-box").show();$("#lightbox-container-image-details-caption").hide();if(_2.imageArray[_2.activeImage][1]){$("#lightbox-container-image-details-caption").html(_2.imageArray[_2.activeImage][1]).show();}if(_2.imageArray.length>1){if(_2.imageArray[_2.activeImage][2]){$("#lightbox-container-image-details-currentNumber").html(_2.txtImage+" "+(_2.activeImage+1)+" "+_2.txtOf+" "+_2.imageArray.length+" "+_2.imageArray[_2.activeImage][2]).show();}else{$("#lightbox-container-image-details-currentNumber").html(_2.txtImage+" "+(_2.activeImage+1)+" "+_2.txtOf+" "+_2.imageArray.length).show();}}}function _set_navigation(){$("#lightbox-nav").show();if(_2.activeImage!=0){$("#lightbox-container-image-details-nav-btnPrev").unbind().show().bind("click",function(){_2.activeImage=_2.activeImage-1;_set_image_to_view();return false;});}if(_2.activeImage!=(_2.imageArray.length-1)){$("#lightbox-container-image-details-nav-btnNext").unbind().show().bind("click",function(){_2.activeImage=_2.activeImage+1;_set_image_to_view();return false;});}_enable_keyboard_navigation();}function _enable_keyboard_navigation(){$(document).keydown(function(_14){_keyboard_action(_14);});}function _disable_keyboard_navigation(){$(document).unbind();}function _keyboard_action(_15){if(_15==null){keycode=event.keyCode;escapeKey=27;}else{keycode=_15.keyCode;escapeKey=_15.DOM_VK_ESCAPE;}key=String.fromCharCode(keycode).toLowerCase();if((key==_2.keyToClose)||(key=="x")||(keycode==escapeKey)){_finish();}if((key==_2.keyToPrev)||(keycode==37)){if(_2.activeImage!=0){_2.activeImage=_2.activeImage-1;_set_image_to_view();_disable_keyboard_navigation();}}if((key==_2.keyToNext)||(keycode==39)){if(_2.activeImage!=(_2.imageArray.length-1)){_2.activeImage=_2.activeImage+1;_set_image_to_view();_disable_keyboard_navigation();}}}function _preload_neighbor_images(){if((_2.imageArray.length-1)>_2.activeImage){objNext=new Image();objNext.src=_2.imageArray[_2.activeImage+1][0];}if(_2.activeImage>0){objPrev=new Image();objPrev.src=_2.imageArray[_2.activeImage-1][0];}}function _finish(){$("#jquery-lightbox").remove();$("#jquery-overlay").fadeOut(function(){$("#jquery-overlay").remove();});$("embed, object, select").css({"visibility":"visible"});}function ___getPageSize(){var _16,yScroll;if(window.innerHeight&&window.scrollMaxY){_16=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_16=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{_16=document.body.offsetWidth;yScroll=document.body.offsetHeight;}}var _17,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){_17=document.documentElement.clientWidth;}else{_17=self.innerWidth;}windowHeight=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_17=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else{if(document.body){_17=document.body.clientWidth;windowHeight=document.body.clientHeight;}}}if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}if(_16<_17){pageWidth=_16;}else{pageWidth=_17;}arrayPageSize=new Array(pageWidth,pageHeight,_17,windowHeight);return arrayPageSize;}function ___getPageScroll(){var _18,yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;_18=self.pageXOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;_18=document.documentElement.scrollLeft;}else{if(document.body){yScroll=document.body.scrollTop;_18=document.body.scrollLeft;}}}arrayPageScroll=new Array(_18,yScroll);return arrayPageScroll;}function ___pause(ms){var _1a=new Date();curDate=null;do{var _1b=new Date();}while(_1b-_1a<ms);}return this.unbind("click").click(_initialize);};})(jQuery);